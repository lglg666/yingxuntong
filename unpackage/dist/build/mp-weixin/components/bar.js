(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/bar"],{1034:function(t,e,o){},5524:function(t,e,o){"use strict";o.r(e);var i=o("76ca"),s=o.n(i);for(var n in i)"default"!==n&&function(t){o.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},"76ca":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o("1b15"),s=function(){Promise.all([o.e("common/vendor"),o.e("components/playermin")]).then(function(){return resolve(o("4af1"))}.bind(null,o)).catch(o.oe)},n={props:{placeHolderVal:{type:String,default:""},searchType:{type:Number,default:1}},data:function(){return{CustomBar:this.CustomBar,keyword:"",oldKeywordList:[],hotKeywordList:[],keywordList:[],forbid:"",isShowKeywordList:!1,isFocus:!1,showCancel:!1,showClose:!1,isShowContent:!1,defaultKeyword:""}},components:{playerMin:s},mounted:function(){this.init()},methods:{init:function(){this.loadDefaultKeyword(),this.loadOldKeyword(),this.loadHotKeyword()},blur:function(){t.hideKeyboard(),this.showClose=!!this.keyword},focus:function(){this.showCancel=!0,this.showClose=!!this.keyword,this.isShowContent||(this.$emit("handle","searching"),t.pageScrollTo({duration:100,scrollTop:0})),this.isShowContent=!0},closeWord:function(){this.keyword="",this.isFocus=!0,this.showCancel=!0,this.showClose=!1,this.isShowKeywordList=!1},cancel:function(){this.isShowKeywordList=!1,this.keyword="",this.isShowContent=!1,this.showCancel=!1,this.showClose=!1,this.$emit("handle","searched")},loadDefaultKeyword:function(){this.defaultKeyword=this.placeHolderVal},loadOldKeyword:function(){var e=this;t.getStorage({key:"OldKeys",success:function(t){var o=JSON.parse(t.data);e.oldKeywordList=o}})},loadHotKeyword:function(){var t=this;(0,i.apiSearchHot)().then((function(e){var o=e.result.hots;t.hotKeywordList=o.map((function(t){return t.first}))}))},triggerConfirm:function(e){""!=this.keyword?this.doSearch(this.keyword):t.showToast({icon:"none",title:"搜索词不能为空"})},inputChange:function(t){var e=this,o=t.detail?t.detail.value:t;if(console.log("this:"+this.keyword,"in:"+o),this.showClose=!!o,!o)return this.keywordList=[],void(this.isShowKeywordList=!1);this.isShowKeywordList=!0,(0,i.apiSerchSuggest)({type:"mobile",keywords:o.trim()}).then((function(t){var i=t.result.allMatch.map((function(t){return t.keyword}));e.keywordList=e.drawCorrelativeKeyword(i,o)}))},drawCorrelativeKeyword:function(t,e){for(var o=t.length,i=[],s=0;s<o;s++){var n=t[s],r=n.replace(e,"<span style='color: #1cbbb4;'>"+e+"</span>");r="<div>"+r+"</div>";var a={keyword:n,htmlStr:r};i.push(a)}return i},setKeyword:function(t){this.keyword=this.keywordList[t].keyword},oldDelete:function(){var e=this;t.showModal({content:"确定清除历史搜索记录？",success:function(o){o.confirm?(console.log("用户点击确定"),e.oldKeywordList=[],t.removeStorage({key:"OldKeys"})):o.cancel&&console.log("用户点击取消")}})},hotToggle:function(){this.forbid=this.forbid?"":"_forbid"},doSearch:function(e){this.keyword=e||this.keyword,this.saveKeyword(e);var o=this.searchType,i={1:"/pages/index/searchsonglist?keyword="+e+"&type="+o,1e3:"/pages/music/searchalbumlist?keyword="+e+"&type="+o,1004:"/pages/video/searchmvlist?keyword="+e+"&type="+o};t.navigateTo({animationDuration:300,animationType:"pop-in",url:i[o]})},saveKeyword:function(e){var o=this;t.getStorage({key:"OldKeys",success:function(i){var s=JSON.parse(i.data),n=s.indexOf(e);-1==n||s.splice(n,1),s.unshift(e),s.length>10&&s.pop(),t.setStorage({key:"OldKeys",data:JSON.stringify(s)}),o.oldKeywordList=s},fail:function(i){var s=[e];t.setStorage({key:"OldKeys",data:JSON.stringify(s)}),o.oldKeywordList=s}})}}};e.default=n}).call(this,o("543d")["default"])},"9a90":function(t,e,o){"use strict";var i=o("1034"),s=o.n(i);s.a},b8c8:function(t,e,o){"use strict";var i;o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return i}));var s=function(){var t=this,e=t.$createElement;t._self._c},n=[]},c005:function(t,e,o){"use strict";o.r(e);var i=o("b8c8"),s=o("5524");for(var n in s)"default"!==n&&function(t){o.d(e,t,(function(){return s[t]}))}(n);o("9a90");var r,a=o("f0c5"),d=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=d.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/bar-create-component',
    {
        'components/bar-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("c005"))
        })
    },
    [['components/bar-create-component']]
]);
